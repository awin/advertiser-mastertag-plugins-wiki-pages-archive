
# Overview

This plugin can be used for Awin Tracking consent management by
advertiser who are using a TCF-compliant Consent Management Platform
(CMP). If the advertiser included Awin as a vendor in their CMP, then
the plugin will automatically read and interpret the TCF consent string
set by the CMP, and determine whether the MasterTag should read or write
AWIN cookies.

# Important Notes

- Before enabling the plugin you must ensure that the advertiser
  included Awin as a vendor in the CMP, and that the consent string
  contains Awin (check the other section of this guide for instructions
  on how to test). If you enable the plugin without ensuring that these
  conditions are met **we will stop tracking** beacuse by default we
  assume negative consent when the plugin is enabled.
- The Awin TCF plugin only manages the consent for the MasterTag
  tracking functionalities.
  - For the **Image Pixel** (NS) tag, the advertiser should manually
    pass the consent parameter to the tag, more details
    [here](https://awin.atlassian.net/wiki/spaces/SOL/pages/246746633/Consent#Consent-AwinTCFconnectorpluginandsignalsfortt=ns(recommendedifCMPisabletocollectTCF)).
  - For the **S2S** tag, the advertiser should block the call or remove
    the cks value from the call if no consent is given.
  - For the **SingleView** cookies, if the advertiser is using the TCF
    plugin, then you should enable the "R.O.EYE - Consent - SingleView"
    instead of the normal SingleView plugin.

# Jargon Buster

- **TCF**: the Transparency and Consent Framework, is a consent
  framework that provides a standardised way for advertisers to manage
  cookie consent.
- **TCF-compliant CMP**: a Consent Management Platform that complies
  with the [IAB TCF requirements and
  policies](https://iabeurope.eu/tcf-for-cmps/). You can find a list of
  TCF compliant CMPs [here](https://iabeurope.eu/cmp-list).
- **Consent string**: an alfa-numeric value generated by the CMP which
  can be interpreted by vendors (like Awin), using the IAB API, to
  determine whether consent was given for them.
- **Vendor**: is a 3rd party company, [registered with
  IAB](https://iabeurope.eu/tcf-for-vendors/), that has access to the
  user's data on the advertiser website. Awin is a Vendor, **Awin's
  vendor ID is 907**, you can see the full list of vendors
  [here](https://iabeurope.eu/vendor-list-tcf/).

# Requirements

- The advertiser to use TCF-compliant CMP
- The advertiser to include Awin as a vendor in the CMP, **with vendor
  ID 907**
- The MasterTag should fire on all pages unconditionally.

# How To Enable The Plugin

The plugin does NOT need any configuration code, simply enable the
plugin "Awin TCF" in the Plugin Store without adding any code.

# Testing The Plugin

## Before enabling the plugin

- go on the website, open the consent banner
- open the vendor list (you should see an option to list all vendors,
  something like "Vendor List")
- ensure that Awin can be found in the list, and ensure that the vendor
  ID (907) is correct (if visible)
- use the CMP Validator Chrome extension to test the setup (see the
  "Useful Links" section for link). If you give consent for Awin (or for
  all cookies), then Awin should appear with a green tick in the
  "Vendors (Consent)" list.

## After enabling the plugin

- clear cache and cookies
- go to the advertiser website via an Awin link
- if you **accept** cookies for Awin (or all cookies), then the Awin
  cookies should be created
- if you **decline** cookies for Awin (or all cookies), then the Awin
  cookies should NOT be created

# Useful Links

- [Plugin repository on
  GitHub](https://github.com/awin/tracking-advertiser-mastertag/tree/master/src/plugins/awin/tcf)
- [CMP Validator Chrome Extension (IAB
  tool)](https://chromewebstore.google.com/detail/cmp-validator/ffhhjklgcfabkpholngojpkijlafjooc?hl=en)
  can be used to debug advertiser's CMP setup. Find the documentation
  [here](https://iabeurope.eu/wp-content/uploads/2023/05/TCF-v2.2-CMP-Validator-User-Guide_15052023.pdf).